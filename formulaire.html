<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Confirmation de réservation</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      html {
        font-family: "Inter", ui-sans-serif, system-ui, -apple-system, Segoe UI,
          Roboto, Helvetica, Arial, Apple Color Emoji, Segoe UI Emoji;
      }
      ::placeholder {
        color: #a3a3a3;
      }
    </style>
    <link
      id="all-fonts-link-font-geist"
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Geist:wght@300;400;500;600;700&amp;display=swap"
    />
    <style id="all-fonts-style-font-geist">
      .font-geist {
        font-family: "Geist", sans-serif !important;
      }
    </style>
    <link
      id="all-fonts-link-font-roboto"
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600;700&amp;display=swap"
    />
    <style id="all-fonts-style-font-roboto">
      .font-roboto {
        font-family: "Roboto", sans-serif !important;
      }
    </style>
    <link
      id="all-fonts-link-font-montserrat"
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&amp;display=swap"
    />
    <style id="all-fonts-style-font-montserrat">
      .font-montserrat {
        font-family: "Montserrat", sans-serif !important;
      }
    </style>
    <link
      id="all-fonts-link-font-poppins"
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&amp;display=swap"
    />
    <style id="all-fonts-style-font-poppins">
      .font-poppins {
        font-family: "Poppins", sans-serif !important;
      }
    </style>
    <link
      id="all-fonts-link-font-playfair"
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;900&amp;display=swap"
    />
    <style id="all-fonts-style-font-playfair">
      .font-playfair {
        font-family: "Playfair Display", serif !important;
      }
    </style>
    <link
      id="all-fonts-link-font-instrument-serif"
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Instrument+Serif:wght@400;500;600;700&amp;display=swap"
    />
    <style id="all-fonts-style-font-instrument-serif">
      .font-instrument-serif {
        font-family: "Instrument Serif", serif !important;
      }
    </style>
    <link
      id="all-fonts-link-font-merriweather"
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700;900&amp;display=swap"
    />
    <style id="all-fonts-style-font-merriweather">
      .font-merriweather {
        font-family: "Merriweather", serif !important;
      }
    </style>
    <link
      id="all-fonts-link-font-bricolage"
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:wght@300;400;500;600;700&amp;display=swap"
    />
    <style id="all-fonts-style-font-bricolage">
      .font-bricolage {
        font-family: "Bricolage Grotesque", sans-serif !important;
      }
    </style>
    <link
      id="all-fonts-link-font-jakarta"
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&amp;display=swap"
    />
    <style id="all-fonts-style-font-jakarta">
      .font-jakarta {
        font-family: "Plus Jakarta Sans", sans-serif !important;
      }
    </style>
    <link
      id="all-fonts-link-font-manrope"
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700;800&amp;display=swap"
    />
    <style id="all-fonts-style-font-manrope">
      .font-manrope {
        font-family: "Manrope", sans-serif !important;
      }
    </style>
    <link
      id="all-fonts-link-font-space-grotesk"
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&amp;display=swap"
    />
    <style id="all-fonts-style-font-space-grotesk">
      .font-space-grotesk {
        font-family: "Space Grotesk", sans-serif !important;
      }
    </style>
    <link
      id="all-fonts-link-font-work-sans"
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;500;600;700;800&amp;display=swap"
    />
    <style id="all-fonts-style-font-work-sans">
      .font-work-sans {
        font-family: "Work Sans", sans-serif !important;
      }
    </style>
    <link
      id="all-fonts-link-font-pt-serif"
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=PT+Serif:wght@400;700&amp;display=swap"
    />
    <style id="all-fonts-style-font-pt-serif">
      .font-pt-serif {
        font-family: "PT Serif", serif !important;
      }
    </style>
    <link
      id="all-fonts-link-font-geist-mono"
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Geist+Mono:wght@300;400;500;600;700&amp;display=swap"
    />
    <style id="all-fonts-style-font-geist-mono">
      .font-geist-mono {
        font-family: "Geist Mono", monospace !important;
      }
    </style>
    <link
      id="all-fonts-link-font-space-mono"
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&amp;display=swap"
    />
    <style id="all-fonts-style-font-space-mono">
      .font-space-mono {
        font-family: "Space Mono", monospace !important;
      }
    </style>
    <link
      id="all-fonts-link-font-quicksand"
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&amp;display=swap"
    />
    <style id="all-fonts-style-font-quicksand">
      .font-quicksand {
        font-family: "Quicksand", sans-serif !important;
      }
    </style>
    <link
      id="all-fonts-link-font-nunito"
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;500;600;700;800&amp;display=swap"
    />
    <style id="all-fonts-style-font-nunito">
      .font-nunito {
        font-family: "Nunito", sans-serif !important;
      }
    </style>

    <!-- Data -->
    <script src="data.js"></script>
  </head>
  <body class="bg-neutral-50 text-neutral-900 antialiased">
    <!-- Header -->
    <header class="sticky top-0 z-30 backdrop-blur supports-[backdrop-filter]:bg-white/70 bg-white/80 border-b border-neutral-200">
      <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
        <div class="flex h-16 items-center justify-between">
          <!-- Brand -->
          <div class="flex items-center gap-3">
            <button onclick="window.location.href='dashboard.html'" class="flex items-center gap-2 hover:opacity-80 transition">
              <span class="inline-flex h-9 w-9 items-center justify-center rounded-lg bg-neutral-900 text-white text-sm font-medium">
                GB
              </span>
              <div class="leading-tight">
                <div class="text-sm font-semibold tracking-tight">Grenoble INP</div>
                <div class="text-[11px] text-neutral-500 -mt-0.5">Classroom Booking</div>
              </div>
            </button>
          </div>

          <!-- Navigation -->
          <div class="hidden md:flex items-center gap-6">
            <nav class="flex items-center gap-6 text-sm">
              <a href="dashboard.html" class="text-neutral-500 hover:text-neutral-900 tracking-tight">Tableau de bord</a>
              <a href="select.html" class="text-neutral-500 hover:text-neutral-900 tracking-tight">Salles</a>
              <span class="text-neutral-900 font-medium tracking-tight">Réserver</span>
            </nav>

            <!-- User menu -->
            <div class="flex items-center gap-3">
              <button class="relative inline-flex h-9 w-9 items-center justify-center rounded-full hover:bg-neutral-100 transition">
                <i data-lucide="bell" class="w-4 h-4 text-neutral-600"></i>
              </button>
              <div class="flex items-center gap-2">
                <button
                  onclick="window.location.href='login.html'"
                  class="h-9 w-9 rounded-full overflow-hidden ring-1 ring-neutral-200 hover:ring-2 hover:ring-neutral-300 transition"
                  title="Se déconnecter"
                >
                  <img id="headerAvatar" class="h-full w-full object-cover" src="" alt="Avatar">
                </button>
                <div class="hidden sm:flex flex-col leading-tight">
                  <span id="headerUserName" class="text-sm font-medium text-neutral-800"></span>
                  <span class="text-xs text-neutral-500">Connecté</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Mobile menu button -->
          <button class="md:hidden inline-flex items-center justify-center h-10 w-10 rounded-full hover:bg-neutral-100">
            <i data-lucide="menu" class="w-6 h-6"></i>
          </button>
        </div>
      </div>
    </header>

    <main class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8">
      <h1 class="text-3xl font-semibold tracking-tight">
        Confirmation de réservation
      </h1>

      <div class="mt-6 grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- Left: Forms -->
        <section class="lg:col-span-2 space-y-6">
          <!-- Reservation form -->
          <div
            class="rounded-xl border border-neutral-200/70 bg-white p-5 sm:p-6"
          >
            <h2 class="text-base font-semibold tracking-tight mb-4">
              Formulaire de réservation
            </h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div class="">
                <label class="mb-1 block text-sm font-medium text-neutral-800"
                  >Bâtiment <span class="text-red-500">*</span></label
                >
                <input
                  id="buildingInput"
                  type="text"
                  readonly
                  value=""
                  class="w-full rounded-lg border border-neutral-200 bg-neutral-50 px-3.5 py-2.5 text-sm text-neutral-900 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-900/80"
                />
              </div>
              <div class="">
                <label class="mb-1 block text-sm font-medium text-neutral-800"
                  >Salle <span class="text-red-500">*</span></label
                >
                <input
                  id="roomInput"
                  type="text"
                  readonly
                  value=""
                  class="w-full rounded-lg border border-neutral-200 bg-neutral-50 px-3.5 py-2.5 text-sm text-neutral-900 focus:outline-none focus:ring-2 focus:ring-neutral-900/80"
                />
              </div>
              <div class="sm:col-span-2">
                <label class="mb-1 block text-sm font-medium text-neutral-800"
                  >Date <span class="text-red-500">*</span></label
                >
                <input
                  id="dateInput"
                  type="date"
                  required
                  class="focus:outline-none focus:ring-2 focus:ring-neutral-900/80 text-sm text-neutral-900 bg-white w-full border-neutral-200 border rounded-lg pt-2.5 pr-3.5 pb-2.5 pl-3.5"
                />
              </div>
              <div>
                <label class="mb-1 block text-sm font-medium text-neutral-800"
                  >Heure de début <span class="text-red-500">*</span></label
                >
                <input
                  id="startTimeInput"
                  type="time"
                  required
                  value="09:00"
                  class="w-full rounded-lg border border-neutral-200 bg-white px-3.5 py-2.5 text-sm text-neutral-900 focus:outline-none focus:ring-2 focus:ring-neutral-900/80"
                />
              </div>
              <div>
                <label class="mb-1 block text-sm font-medium text-neutral-800"
                  >Heure de fin <span class="text-red-500">*</span></label
                >
                <input
                  id="endTimeInput"
                  type="time"
                  required
                  value="11:00"
                  class="w-full rounded-lg border border-neutral-200 bg-white px-3.5 py-2.5 text-sm text-neutral-900 focus:outline-none focus:ring-2 focus:ring-neutral-900/80"
                />
              </div>
            </div>
          </div>

          <!-- Participants -->
          <div
            class="rounded-xl border border-neutral-200/70 bg-white p-5 sm:p-6"
          >
            <h2 class="text-base font-semibold tracking-tight mb-4">
              Participants
            </h2>
            <div>
              <label class="mb-1 block text-sm font-medium text-neutral-800"
                >Participants <span class="text-red-500">*</span></label
              >
              <div
                class="flex items-stretch rounded-lg border border-neutral-200 w-full max-w-sm"
              >
                <button
                  id="minus"
                  class="px-3 sm:px-4 text-neutral-700 hover:bg-neutral-50 disabled:text-neutral-300"
                  aria-label="Diminuer"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    data-lucide="minus"
                    class="lucide lucide-minus h-4 w-4"
                  >
                    <path d="M5 12h14"></path>
                  </svg>
                </button>
                <input
                  id="participants"
                  type="text"
                  inputmode="numeric"
                  class="flex-1 text-center px-3 py-2.5 text-sm focus:outline-none"
                  value="10"
                  aria-live="polite"
                />
                <button
                  id="plus"
                  class="px-3 sm:px-4 text-neutral-700 hover:bg-neutral-50 disabled:text-neutral-300"
                  aria-label="Augmenter"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    data-lucide="plus"
                    class="lucide lucide-plus h-4 w-4"
                  >
                    <path d="M5 12h14"></path>
                    <path d="M12 5v14"></path>
                  </svg>
                </button>
              </div>
            </div>
          </div>

          <!-- User info -->
          <div
            class="rounded-xl border border-neutral-200/70 bg-white p-5 sm:p-6"
          >
            <h2 class="text-base font-semibold tracking-tight mb-4">
              Coordonnées de l'utilisateur
            </h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div>
                <label class="mb-1 block text-sm font-medium text-neutral-800"
                  >Nom <span class="text-red-500">*</span></label
                >
                <input
                  id="lastNameInput"
                  type="text"
                  required
                  value=""
                  class="w-full rounded-lg border border-neutral-200 bg-white px-3.5 py-2.5 text-sm text-neutral-900 focus:outline-none focus:ring-2 focus:ring-neutral-900/80"
                />
              </div>
              <div>
                <label class="mb-1 block text-sm font-medium text-neutral-800"
                  >Prénoms <span class="text-red-500">*</span></label
                >
                <input
                  id="firstNameInput"
                  type="text"
                  required
                  value=""
                  class="w-full rounded-lg border border-neutral-200 bg-white px-3.5 py-2.5 text-sm text-neutral-900 focus:outline-none focus:ring-2 focus:ring-neutral-900/80"
                />
              </div>
              <div class="sm:col-span-2">
                <label class="mb-1 block text-sm font-medium text-neutral-800"
                  >Téléphone <span class="text-red-500">*</span></label
                >
                <input
                  id="phoneInput"
                  type="tel"
                  required
                  value=""
                  placeholder="+33 6 12 34 56 78"
                  class="w-full rounded-lg border border-neutral-200 bg-white px-3.5 py-2.5 text-sm text-neutral-900 focus:outline-none focus:ring-2 focus:ring-neutral-900/80"
                />
              </div>
              <div class="sm:col-span-2">
                <label class="mb-1 block text-sm font-medium text-neutral-800"
                  >Commentaires
                  <span class="text-neutral-400 font-normal"
                    >(optionnel)</span
                  ></label
                >
                <textarea
                  id="commentsInput"
                  rows="3"
                  placeholder="Informations complémentaires..."
                  class="w-full rounded-lg border border-neutral-200 bg-white px-3.5 py-2.5 text-sm text-neutral-900 focus:outline-none focus:ring-2 focus:ring-neutral-900/80"
                ></textarea>
              </div>
            </div>
          </div>

          <!-- Actions -->
          <div class="flex flex-col sm:flex-row gap-3">
            <button
              id="cancelBtn"
              type="button"
              onclick="window.location.href='select.html'"
              class="inline-flex w-full sm:w-auto items-center justify-center rounded-lg border border-neutral-300 bg-white px-5 py-2.5 text-sm font-medium text-neutral-800 hover:bg-neutral-50"
            >
              Annuler
            </button>
            <button
              id="confirmBtn"
              type="button"
              class="inline-flex w-full sm:w-auto items-center justify-center rounded-lg bg-neutral-900 px-5 py-2.5 text-sm font-medium text-white hover:bg-black"
            >
              Confirmer la réservation
            </button>
          </div>
        </section>

        <!-- Right: Room summary -->
        <aside class="lg:col-span-1">
          <div
            class="md:sticky md:top-6 rounded-xl border border-neutral-200/70 bg-white p-5 sm:p-6"
          >
            <div
              class="overflow-hidden rounded-lg border border-neutral-200/70"
            >
              <img
                id="roomImage"
                class="h-44 w-full object-cover"
                src="https://images.unsplash.com/photo-1503676260728-1c00da094a0b?auto=format&amp;fit=crop&amp;w=1200&amp;q=60"
                alt="Salle de cours"
              />
            </div>
            <div class="mt-3">
              <div class="flex items-center justify-between">
                <p id="roomName" class="text-sm font-medium tracking-tight">Salle F 215</p>
                <span
                  class="inline-flex items-center gap-1 text-[11px] text-neutral-500"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    data-lucide="map-pin"
                    class="lucide lucide-map-pin h-3.5 w-3.5"
                  >
                    <path
                      d="M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"
                    ></path>
                    <circle cx="12" cy="10" r="3"></circle>
                  </svg>
                  <span id="roomBuilding">F</span>
                </span>
              </div>

              <div class="mt-3 grid grid-cols-2 gap-2">
                <span
                  class="inline-flex items-center gap-2 rounded-md bg-neutral-100 px-2.5 py-1.5 text-xs text-neutral-800"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    data-lucide="wifi"
                    class="lucide lucide-wifi h-4 w-4 text-neutral-600"
                  >
                    <path d="M12 20h.01"></path>
                    <path d="M2 8.82a15 15 0 0 1 20 0"></path>
                    <path d="M5 12.859a10 10 0 0 1 14 0"></path>
                    <path d="M8.5 16.429a5 5 0 0 1 7 0"></path>
                  </svg>
                  Wifi
                </span>
                <span
                  class="inline-flex items-center gap-2 rounded-md bg-neutral-100 px-2.5 py-1.5 text-xs text-neutral-800"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    data-lucide="users"
                    class="lucide lucide-users h-4 w-4 text-neutral-600"
                  >
                    <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                    <path d="M16 3.128a4 4 0 0 1 0 7.744"></path>
                    <path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                  </svg>
                  <span id="roomCapacity">40</span> places
                </span>
                <span
                  class="inline-flex items-center gap-2 rounded-md bg-neutral-100 px-2.5 py-1.5 text-xs text-neutral-800"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    data-lucide="computer"
                    class="lucide lucide-computer h-4 w-4 text-neutral-600"
                  >
                    <rect width="14" height="8" x="5" y="2" rx="2"></rect>
                    <rect width="20" height="8" x="2" y="14" rx="2"></rect>
                    <path d="M6 18h2"></path>
                    <path d="M12 18h6"></path>
                  </svg>
                  Ordinateurs
                </span>
                <span
                  class="inline-flex items-center gap-2 rounded-md bg-neutral-100 px-2.5 py-1.5 text-xs text-neutral-800"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    data-lucide="video"
                    class="lucide lucide-video h-4 w-4 text-neutral-600"
                  >
                    <path
                      d="m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5"
                    ></path>
                    <rect x="2" y="6" width="14" height="12" rx="2"></rect>
                  </svg>
                  Vidéoprojecteur
                </span>
                <span
                  class="inline-flex items-center gap-2 rounded-md bg-neutral-100 px-2.5 py-1.5 text-xs text-neutral-800 col-span-2"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    data-lucide="presentation"
                    class="lucide lucide-presentation h-4 w-4 text-neutral-600"
                  >
                    <path d="M2 3h20"></path>
                    <path d="M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3"></path>
                    <path d="m7 21 5-5 5 5"></path>
                  </svg>
                  Tableau blanc
                </span>
              </div>

              <div class="mt-4">
                <div class="h-2 w-full rounded-full bg-neutral-100">
                  <div
                    class="h-2 rounded-full bg-emerald-500"
                    style="width: 70%"
                    aria-valuenow="70"
                    aria-valuemin="0"
                    aria-valuemax="100"
                  ></div>
                </div>
                <p class="mt-2 text-xs text-neutral-700">Reste: 10 minutes</p>
              </div>
            </div>
          </div>
        </aside>
      </div>
    </main>

    <!-- Scripts -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <script>
      // Variables globales
      let selectedRoom = null;

      // Initialize lucide icons and load data
      window.addEventListener("DOMContentLoaded", () => {
        if (window.lucide) window.lucide.createIcons();

        // Charger les données de l'utilisateur
        const user = getCurrentUser();

        // Header
        document.getElementById('headerUserName').textContent = user.firstName;
        document.getElementById('headerAvatar').src = user.avatar;

        // Formulaire
        document.getElementById('lastNameInput').value = user.lastName;
        document.getElementById('firstNameInput').value = user.firstName;
        document.getElementById('phoneInput').value = user.phone;

        // Récupérer la salle sélectionnée depuis localStorage
        const roomData = localStorage.getItem('selectedRoom');
        if (roomData) {
          selectedRoom = JSON.parse(roomData);
          loadRoomData(selectedRoom);
        } else {
          alert('Aucune salle sélectionnée. Retour à la liste des salles.');
          window.location.href = 'select.html';
        }

        // Définir la date par défaut à aujourd'hui
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('dateInput').value = today;
      });

      // Fonction pour charger les données de la salle
      function loadRoomData(room) {
        // Remplir les informations de la salle dans le formulaire
        document.getElementById('buildingInput').value = `Bâtiment ${room.building}`;
        document.getElementById('roomInput').value = room.name;

        // Remplir le récapitulatif de la salle
        document.getElementById('roomImage').src = room.img;
        document.getElementById('roomName').textContent = room.name;
        document.getElementById('roomBuilding').textContent = room.building;
        document.getElementById('roomCapacity').textContent = room.seats;

        // Afficher les équipements disponibles (déjà codés en dur dans le HTML)
        // On pourrait les rendre dynamiques si nécessaire
      }

      // Participants stepper logic
      const input = document.getElementById("participants");
      const minus = document.getElementById("minus");
      const plus = document.getElementById("plus");
      const clamp = (val, min, max) => Math.max(min, Math.min(max, val));

      function parseNum(v) {
        const n = parseInt(String(v).replace(/\D/g, ""), 10);
        return isNaN(n) ? 0 : n;
      }

      function updateButtons() {
        const val = parseNum(input.value);
        minus.disabled = val <= 0;
        plus.disabled = val >= 200;
      }

      minus.addEventListener("click", () => {
        const val = parseNum(input.value);
        input.value = clamp(val - 1, 0, 200);
        updateButtons();
      });

      plus.addEventListener("click", () => {
        const val = parseNum(input.value);
        input.value = clamp(val + 1, 0, 200);
        updateButtons();
      });

      input.addEventListener("input", () => {
        input.value = parseNum(input.value);
        updateButtons();
      });

      updateButtons();

      // Fonction pour confirmer la réservation
      document.getElementById('confirmBtn').addEventListener('click', () => {
        // Récupérer toutes les valeurs du formulaire
        const date = document.getElementById('dateInput').value;
        const startTime = document.getElementById('startTimeInput').value;
        const endTime = document.getElementById('endTimeInput').value;
        const participants = parseNum(document.getElementById('participants').value);
        const lastName = document.getElementById('lastNameInput').value;
        const firstName = document.getElementById('firstNameInput').value;
        const phone = document.getElementById('phoneInput').value;
        const comments = document.getElementById('commentsInput').value;

        // Validation simple
        if (!date || !startTime || !endTime || !lastName || !firstName || !phone) {
          alert('Veuillez remplir tous les champs obligatoires.');
          return;
        }

        if (participants === 0) {
          alert('Le nombre de participants doit être supérieur à 0.');
          return;
        }

        // Créer la réservation
        const reservationData = {
          roomId: selectedRoom.id,
          campusId: selectedRoom.campusId || 2,
          date: date,
          startTime: startTime,
          endTime: endTime,
          participants: participants,
          purpose: comments || 'Réservation de salle',
          userInfo: {
            lastName: lastName,
            firstName: firstName,
            phone: phone
          }
        };

        // Sauvegarder la réservation (simulation)
        const newReservation = createReservation(reservationData);

        // Afficher une confirmation
        alert(`Réservation confirmée !\n\nSalle: ${selectedRoom.name}\nDate: ${date}\nHoraire: ${startTime} - ${endTime}\nParticipants: ${participants}\n\nNuméro de réservation: #${newReservation.id}`);

        // Rediriger vers le dashboard
        window.location.href = 'dashboard.html';
      });
    </script>
  </body>
</html>
